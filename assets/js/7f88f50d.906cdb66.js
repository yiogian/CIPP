"use strict";(self.webpackChunkcipp_docs=self.webpackChunkcipp_docs||[]).push([[7086],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return u}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=c(n),u=i,h=m["".concat(l,".").concat(u)]||m[u]||d[u]||o;return n?a.createElement(h,r(r({ref:t},p),{},{components:n})):a.createElement(h,r({ref:t},p))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var c=2;c<o;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3326:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return p},default:function(){return f},frontMatter:function(){return c},metadata:function(){return d},toc:function(){return u}});var a,i=n(7462),o=n(3366),r=(n(7294),n(3905)),s=n(5108),l=["components"],c={id:"gdap",title:"GDAP",description:"Using the GDAP migration tool",slug:"/usingcipp/GDAP/migration"},p=void 0,d={unversionedId:"usingcipp/GDAP/gdap",id:"usingcipp/GDAP/gdap",title:"GDAP",description:"Using the GDAP migration tool",source:"@site/docs/user/usingcipp/GDAP/index.md",sourceDirName:"usingcipp/GDAP",slug:"/usingcipp/GDAP/migration",permalink:"/docs/user/usingcipp/GDAP/migration",editUrl:"https://github.com/KelvinTegelaar/CIPP/tree/website/docs/user/usingcipp/GDAP/index.md",tags:[],version:"current",lastUpdatedBy:"KelvinTegelaar",lastUpdatedAt:1672998047,formattedLastUpdatedAt:"06/01/2023",frontMatter:{id:"gdap",title:"GDAP",description:"Using the GDAP migration tool",slug:"/usingcipp/GDAP/migration"},sidebar:"userSidebar",previous:{title:"Updating",permalink:"/docs/user/updating"}},m={},u=[{value:"What is GDAP",id:"what-is-gdap",level:2},{value:"Using the GDAP Wizard",id:"using-the-gdap-wizard",level:2},{value:"Recommended roles for CIPP",id:"recommended-roles-for-cipp",level:2},{value:"Known Issues / Limitations",id:"known-issues--limitations",level:2}],h=(a="NoKnownIssues",function(e){return s.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",e)}),g={toc:u};function f(e){var t=e.components,n=(0,o.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"A temporary addition to CIPP is the GDAP Migration tool. The GDAP migration tool was created in collabration with Microsoft's GDAP team. Please follow the instructions on this page to the letter to achieve a succesful migration to GDAP."),(0,r.kt)("p",null,"The GDAP migration tool will function until March 2023. Migrations after this date will need to be performed manually."),(0,r.kt)("h2",{id:"what-is-gdap"},"What is GDAP"),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The set migration dates have been changed by Microsoft. Find the latest information ",(0,r.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-gb/partner-center/announcements/2022-october#17"},"here")))),(0,r.kt)("p",null,'Accessing tenants as a Microsoft Partner is currently done through "DAP". DAP stands for delegated access permissions. DAP gives you Global Administrator access to all your tenants, but has limitations. Microsoft has decided to make DAP more secure, and also more functional. GDAP allows you to access the tenants according to the role you\'ve set. This mean you are able to give one employee "helpdesk" access, and another employee "security" access.'),(0,r.kt)("p",null,"GDAP requires a mapping between roles and security groups in your partner tenant. CIPP creates these groups and mappings for you. Do not select all roles - This is not supported by Microsoft and CIPP. Selecting all roles(or most roles) will guarantee unexpected results. Carefully consider which roles are required for your deployment."),(0,r.kt)("p",null,"GDAP relationships have a maximum age. Every 2 years(730 days) the relationships will need to be renewed. This currently is a manual action that needs to be performed by the tenant administrator."),(0,r.kt)("p",null,"GDAP will be a requirement from February 1st for Microsoft Partners, and you will not be able to make new DAP relationships from that point forward."),(0,r.kt)("p",null,"After the migration date of March 31st, new GDAP relationships will not be created in an automated fashion, and you must log onto the target tenant itself to accept GDAP invites. This is very time consuming so it's recommended to migrate to GDAP now."),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"For more information on GDAP, check out Microsoft's own documentation ",(0,r.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/partner-center/gdap-introduction"},"here")))),(0,r.kt)("h2",{id:"using-the-gdap-wizard"},"Using the GDAP Wizard"),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The GDAP migration wizard is offered as-is. Bug reports, feature requests, or issues will not be accepted for the GDAP migration wizard."))),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"if your customers have conditional access policies enabled it is likely that further configuration will be required on each of those tenants. For more info see Microsoft's own documentation ",(0,r.kt)("a",{parentName:"h5",href:"https://learn.microsoft.com/en-us/partner-center/gdap-faq#what-is-the-recommended-next-step-if-the-conditional-access-policy-set-by-the-customer-blocks-all-external-access-including-csps-access-aobo-to-the-customers-tenant"},"here"))),(0,r.kt)("div",{parentName:"div",className:"admonition-content"})),(0,r.kt)("p",null,"The GDAP wizard will use the temporary APIs to create a relationship for you, and create the security groups and assign the roles to these groups. You may change the name of the groups after the migration has been performed."),(0,r.kt)("p",null,"CIPP assumes that you will want a relationship of 730 days."),(0,r.kt)("p",null,"Follow the list below before starting the GDAP Wizard. You must execute each of these steps to successfully migrate to GDAP."),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"It is highly recommended to run the migration for a single tenant first, to prevent the creation of duplicate groups in your own tenant. Selecting multiple tenants on your first run, will fail, and will create duplicate groups in your own tenant ")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You must be a global Admin and in the 'AdminAgents' group to perform this."),(0,r.kt)("li",{parentName:"ul"},"Go to your CIPP instance and click on GDAP -> Migration Wizard. Click the button to enable the migration API.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"if the enable API wizard fails, execute the manual instructions given by the application and continue with the steps below."))),(0,r.kt)("li",{parentName:"ul"},"Follow the link returned by the application, or go to your Secure Application Model app in Azure."),(0,r.kt)("li",{parentName:"ul"},"Click on API Permissions"),(0,r.kt)("li",{parentName:"ul"},'Click on Add and choose "APIs My organization uses"'),(0,r.kt)("li",{parentName:"ul"},'Find "Partner Customer Delegated Administration"'),(0,r.kt)("li",{parentName:"ul"},'Add all permissions under "Delegated" and "Application" and click Add Permissions'),(0,r.kt)("li",{parentName:"ul"},'Click on "Grant Admin Consent for {Organization}".'),(0,r.kt)("li",{parentName:"ul"},"Go back to CIPP and perform all steps in the wizard for ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("em",{parentName:"strong"},"a single tenant"))),(0,r.kt)("li",{parentName:"ul"},"Once you have tested and are satisfied all is working as expected, you can now carry out the wizard again for multiple tenants at once.  ")),(0,r.kt)("p",null,"You can view the status of the GDAP migration in the GDAP Migration Status tab. When the migration has been completed for all your tenants you can move users into the new groups to use GDAP."),(0,r.kt)("p",null,"Please remember to put the CIPP-SAM user in these groups as well. It is not recommended to add all groups to a user."),(0,r.kt)("h2",{id:"recommended-roles-for-cipp"},"Recommended roles for CIPP"),(0,r.kt)("p",null,"As CIPP is an application that touches many parts of M365 selecting the roles might be difficult. The following roles are recommended for CIPP, but you may experiment with less permissive groups at your own risk."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Application Administrator"),(0,r.kt)("li",{parentName:"ul"},"User Administrator"),(0,r.kt)("li",{parentName:"ul"},"Intune Administrator"),(0,r.kt)("li",{parentName:"ul"},"Exchange Administrator"),(0,r.kt)("li",{parentName:"ul"},"Security Administrator"),(0,r.kt)("li",{parentName:"ul"},"Cloud App Security Administrator")),(0,r.kt)("h2",{id:"known-issues--limitations"},"Known Issues / Limitations"),(0,r.kt)(h,{mdxType:"NoKnownIssues"}))}f.isMDXComponent=!0}}]);